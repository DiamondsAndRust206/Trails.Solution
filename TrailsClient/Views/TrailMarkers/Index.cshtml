<h1>All TrailMarkers:</h1>

<p>@Html.ActionLink("Add new trailMarker", "Create")</p>

<div id="viewDiv"></div>

  @section Scripts
  {
    <style>
        html,
        body,
        #viewDiv {
          padding: 0;
            margin: 0;
            height: 88vh;
            width: 99vw;
        }
      </style>
      
    <link rel="stylesheet" href="https://js.arcgis.com/4.24/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.24/"></script>

    <script>

      let trailMarkers = @Model;
      require(["esri/config","esri/Map", "esri/views/MapView", "esri/Graphic", "esri/layers/GraphicsLayer"], function (esriConfig, Map, MapView, Graphic, GraphicsLayer) {

        esriConfig.apiKey = "AAPK7691fadea68d4c688c09d108d1cd1d7cSxgmrGZq1iMecdeWEN29tO3QCLIzXUFXyg4PLvxYtshTAFhyxYK6D4d2m-vnNbrK";

        const map = new Map({
          basemap: "arcgis-topographic" // Basemap layer service
        });

        const view = new MapView({
          map: map,
          center: [-122.62495,45.52118], // Longitude, latitude --Laurelhurst Park OR
          zoom: 13, // Zoom level
          container: "viewDiv" // Div element
        });


          const graphicsLayer = new GraphicsLayer();
          map.add(graphicsLayer);

        for(let i = 0; i < trailMarkers.length; i++)
        {
          console.log(trailMarker.Name);
          const point = { //Create a point
            type: "point",
            longitude: trailMarkers[i].Longitude,
            latitude: trailMarkers[i].Latitude
            //longitude: -122.62495,
            //latitude: 45.52118
          };
          
          //style point marker
          const simpleMarkerSymbol = {
            type: "simple-marker",
            color: [226, 119, 40],  // Orange
            outline: {
              color: [255, 255, 255], // White
              width: 1
            }
          };

          const popupTemplate = {
            title: "{Name}",
            content: "{Description}"
            }
            const attributes = {
              Name: "TrailMarker",
              Description: "INSERT A NAME HERE"
            }
          const pointGraphic = new Graphic({
            geometry: point,
            symbol: simpleMarkerSymbol,

            attributes: attributes,
            popupTemplate: popupTemplate
          });
          graphicsLayer.add(pointGraphic);
        }
      });
    </script>
  }
